# Section 4.3.2 Visual Reference Guide

## Page Layout Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é¡¹ç›®å±•ç¤ºä¸»é¡µ (Project Homepage)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ é¡¹ç›®æ€»æ•°    â”‚  â”‚  è¿›è¡Œä¸­     â”‚  â”‚  å·²é—­çŽ¯     â”‚  â”‚  å·²ç»ˆæ­¢     â”‚   â”‚
â”‚  â”‚    XX      â”‚  â”‚    XX      â”‚  â”‚    XX      â”‚  â”‚    XX      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            å„æµç¨‹é˜¶æ®µé¡¹ç›®åˆ†å¸ƒ (7 stages with icons)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  é¡¹ç›®ç­›é€‰ä¸Žæœç´¢ (Filters & Search)                               â”‚ â”‚
â”‚  â”‚  [æµç¨‹é˜¶æ®µâ–¼] [é¡¹ç›®çŠ¶æ€â–¼] [é¡¹ç›®æ€§è´¨â–¼] [æœç´¢æ¡†___]               â”‚ â”‚
â”‚  â”‚  [æŽ’åºæ–¹å¼â–¼ å€’åºâ–¼]  [æœç´¢] [é‡ç½®]                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  [+ æ–°å¢žé¡¹ç›®ç™»è®°]                                                     â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ Card 1  â”‚  â”‚ Card 2  â”‚  â”‚ Card 3  â”‚  ...                         â”‚
â”‚  â”‚         â”‚  â”‚         â”‚  â”‚         â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Project Card Structure (4.3.2.1)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ XM2024001                              [çŠ¶æ€æ ‡ç­¾]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  æ™ºæ…§åŸŽå¸‚æ•°æ®å¹³å°å»ºè®¾é¡¹ç›®                                 â”‚
â”‚                                                          â”‚
â”‚  é¡¹ç›®ç±»åž‹: æ–½å·¥ç±» / å¸‚æ”¿å·¥ç¨‹                              â”‚
â”‚  é¡¹ç›®æ€§è´¨: [æ”¿åºœæŠ•èµ„]                                     â”‚
â”‚                                                          â”‚
â”‚  å½“å‰é˜¶æ®µ: [æ–½å·¥å®žæ–½ä¸­]                                   â”‚
â”‚                                                          â”‚
â”‚  æ•´ä½“è¿›åº¦                                                 â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45%                                â”‚
â”‚                                                          â”‚
â”‚  æ–½å·¥è¿›åº¦                                                 â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 65%                                â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ðŸ‘¤ è´Ÿè´£äºº: å¼ ä¸‰ 138****5678                   â”‚      â”‚
â”‚  â”‚ ðŸ“ ç™»è®°äºº: æŽå››                               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                          â”‚
â”‚  ðŸ’° é¢„ç®—: 1,234.56 ä¸‡å…ƒ                                  â”‚
â”‚  ðŸ“… è®¡åˆ’å·¥æœŸ: 2026-01-01 ~ 2026-12-31                   â”‚
â”‚  ðŸ“ åœ°ç‚¹: åŒ—äº¬å¸‚æœé˜³åŒº                                   â”‚
â”‚                                                          â”‚
â”‚  èµ„é‡‘æ¥æº: æ”¿åºœè´¢æ”¿æ‹¨æ¬¾                                   â”‚
â”‚  ä¸­æ ‡å•ä½: XXå»ºè®¾é›†å›¢æœ‰é™å…¬å¸                             â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ• åˆ›å»º: 2026-01-15 10:30                               â”‚
â”‚  ðŸ• æ›´æ–°: 2026-02-07 15:45                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ðŸ‘ æŸ¥çœ‹è¯¦æƒ…]                    [âœ ç¼–è¾‘]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Statistics Widget Icons (4.3.2.3)

**Lifecycle Stage Distribution Icons:**

| Stage | Icon | Label | Color |
|-------|------|-------|-------|
| 1 | ðŸ“„ fa-file-alt | å‰æœŸå†³ç­– | Primary (Blue) |
| 2 | âœ… fa-check-square | ç«‹é¡¹ | Success (Green) |
| 3 | ðŸ“ fa-pencil-ruler | è§„åˆ’è®¾è®¡ | Info (Cyan) |
| 4 | ðŸ”§ fa-tools | æ–½å·¥å‡†å¤‡ | Warning (Yellow) |
| 5 | ðŸ‘· fa-hard-hat | æ–½å·¥å®žæ–½ | Danger (Red) |
| 6 | ðŸ“‹ fa-clipboard-check | ç«£å·¥éªŒæ”¶ | Secondary (Gray) |
| 7 | ðŸ§® fa-calculator | ç«£å·¥ç»“ç®— | Dark (Black) |

## Filter Options (4.3.2.2)

### Lifecycle Stage Filter (æµç¨‹é˜¶æ®µ)
```
- å…¨éƒ¨
- å‰æœŸå†³ç­–å®Œæˆ
- ç«‹é¡¹å®Œæˆ
- è§„åˆ’ä¸Žè®¾è®¡å®Œæˆ
- æ–½å·¥å‡†å¤‡å®Œæˆ
- æ–½å·¥å®žæ–½ä¸­
- ç«£å·¥éªŒæ”¶ä¸­
- ç«£å·¥ç»“ç®—ä¸­
- å·²é—­çŽ¯
- å·²ç»ˆæ­¢
```

### Project Status Filter (é¡¹ç›®çŠ¶æ€)
```
- å…¨éƒ¨
- è‰ç¨¿
- åŸºç¡€ä¿¡æ¯å·²ç™»è®°
- å‰æœŸå†³ç­–ä¸­
- å‰æœŸå†³ç­–å·²é€šè¿‡
- è¿›è¡Œä¸­
- å·²å®Œæˆ
- å·²å–æ¶ˆ
```

### Project Nature Filter (é¡¹ç›®æ€§è´¨)
```
- å…¨éƒ¨
- æ”¿åºœæŠ•èµ„
- ä¼ä¸šæŠ•èµ„
```

### Sort Options (æŽ’åºæ–¹å¼)
```
- æœ€è¿‘æ›´æ–°æ—¶é—´ [å€’åº/æ­£åº]
- ç™»è®°æ—¥æœŸ [å€’åº/æ­£åº]
- é¡¹ç›®åç§° [å€’åº/æ­£åº]
- é¢„ç®— [å€’åº/æ­£åº]
```

## Status Badge Colors

| Status | Badge Color | CSS Class |
|--------|-------------|-----------|
| è‰ç¨¿ | Gray | badge-secondary |
| åŸºç¡€ä¿¡æ¯å·²ç™»è®° | Cyan | badge-info |
| å‰æœŸå†³ç­–ä¸­ | Blue | badge-primary |
| å‰æœŸå†³ç­–å·²é€šè¿‡ | Green | badge-success |
| è¿›è¡Œä¸­ | Yellow | badge-warning |
| å·²å®Œæˆ | Green | badge-success |
| å·²å–æ¶ˆ | Red | badge-danger |

## Progress Bar Colors

| Progress Range | Color | CSS Class |
|---------------|-------|-----------|
| 0% - 29% | Red | bg-danger |
| 30% - 69% | Yellow | bg-warning |
| 70% - 100% | Green | bg-success |
| Construction Progress | Blue | bg-primary |

## Data Flow

```
User Request
    â†“
ProjectHomepageController
    â†“
ProjectRepository (with filters)
    â†“
[Project Entity] â†’ ProjectDisplayService â†’ [ProjectCardDTO]
    â†“
Twig Template
    â†“
HTML Response (Project Cards)
```

## Key Features Implementation

### 1. Privacy Protection
```php
// Phone: 13812345678 â†’ 138****5678
$maskedPhone = substr($phone, 0, 3) . '****' . substr($phone, -4);
```

### 2. Budget Formatting
```php
// Database: 12345678.00 (å…ƒ)
// Display: 1,234.56 ä¸‡å…ƒ
$budgetWanYuan = $budgetFloat / 10000;
$formatted = number_format($budgetWanYuan, 2, '.', ',') . ' ä¸‡å…ƒ';
```

### 3. Progress Calculation
```php
// Stage-based (0-7) â†’ 0-100%
$stageProgress = (int)($stage * 14.3); // 100 / 7 â‰ˆ 14.3

// If in construction, add detailed progress
if ($stage === 5 && $implementationProgress !== null) {
    $stageProgress += (int)($implementationProgress * 0.143);
}
```

### 4. Stage Detection
```php
// Cascade through lifecycle stages
if ($project->getSettlementAccounts() !== null) return 'ç«£å·¥ç»“ç®—ä¸­';
if ($project->getCompletionAcceptance() !== null) return 'ç«£å·¥éªŒæ”¶ä¸­';
if ($project->getConstructionImplementation() !== null) return 'æ–½å·¥å®žæ–½ä¸­';
// ... and so on
```

## Responsive Layout

### Desktop (â‰¥992px)
- 3 columns of project cards
- Full filter bar visible
- Statistics in 4 columns

### Tablet (768px - 991px)
- 2 columns of project cards
- Filter bar stacked
- Statistics in 4 columns

### Mobile (<768px)
- 1 column of project cards
- Filter bar fully stacked
- Statistics in 2 columns

## Accessibility Features

1. **Semantic HTML**: Proper use of `<nav>`, `<main>`, `<article>`, `<aside>`
2. **ARIA Attributes**: Progress bars with `aria-valuenow`, `aria-valuemin`, `aria-valuemax`
3. **Color Contrast**: All text meets WCAG AA standards
4. **Keyboard Navigation**: All interactive elements keyboard accessible
5. **Focus Indicators**: Visible focus states on all interactive elements

## Performance Considerations

1. **Single Query**: All projects fetched in one database query with proper joins
2. **Lazy Loading**: Files and images not loaded for card display
3. **Index Usage**: Filters use indexed columns (status, created_at, project_number)
4. **Pagination Ready**: Structure supports pagination (not yet implemented)
5. **Caching Ready**: DTOs can be cached for frequently accessed projects

## Browser Compatibility

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

Bootstrap 5 and Font Awesome 6 ensure cross-browser compatibility.
